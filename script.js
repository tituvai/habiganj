

// ------------------ Default Data ------------------
let data = [
  {
    seat:"‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú-‡ßß",
    candidates:[
      {image:"image/md bodrul reja.png", name:"‡¶Æ‡ßá‡¶æ‡¶π‡¶æ‡¶Æ‡ßç‡¶Æ‡¶¶ ‡¶¨‡¶¶‡¶∞‡ßÅ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶æ",party:"‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂",symbol:"‡¶ö‡ßá‡¶Ø‡¶º‡¶æ‡¶∞",votes:15280},
      {image:"image/kaji tufayel ahmod.png", name:"‡¶ï‡¶æ‡¶ú‡ßÄ ‡¶§‡ßã‡¶´‡¶æ‡ßü‡ßá‡¶≤ ‡¶Ü‡¶π‡¶Æ‡ßá‡¶¶",party:"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶ú‡¶æ‡¶§‡ßÄ‡ßü ‡¶∏‡¶Æ‡¶æ‡¶ú‡¶§‡¶æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶ø‡¶ï ‡¶¶‡¶≤ (‡¶ú‡¶æ‡¶∏‡¶¶)",symbol:"‡¶ï‡¶æ‡¶∞",votes:12450},
      {image:"image/reja kibriya.png", name:"‡¶∞‡ßá‡¶ú‡¶æ ‡¶ï‡¶ø‡¶¨‡¶∞‡¶ø‡ßü‡¶æ",party:"‡¶¨‡¶ø‡¶è‡¶®‡¶™‡¶ø",symbol:"‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶∂‡ßÄ‡¶∑",votes:19870},
      {image:"image/mowlana sirajul islam.png", name:"‡¶Æ‡¶æ‡¶ì‡¶≤‡¶æ‡¶®‡¶æ ‡¶∏‡¶ø‡¶∞‡¶æ‡¶ú‡ßÅ‡¶≤ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ",party:"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶ñ‡ßá‡¶≤‡¶æ‡¶´‡¶§ ‡¶Æ‡¶ú‡¶≤‡¶ø‡¶∏",symbol:"‡¶∞‡¶ø‡¶ï‡ßç‡¶∏‡¶æ",votes:7320},
      {image:"image/shakh sujat mia.png", name:"‡¶∂‡ßá‡¶ñ ‡¶∏‡ßÅ‡¶ú‡¶æ‡¶§ ‡¶Æ‡¶ø‡ßü‡¶æ",party:"‡¶∏‡ßç‡¶¨‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞",symbol:"‡¶ò‡ßã‡ßú‡¶æ",votes:4150},
    ]
  },
  {
    seat:"‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú-‡ß®",
    candidates:[
      {image:"image/abdul basit ajad.png", name:"‡¶Ü‡¶¨‡ßç‡¶¶‡ßÅ‡¶≤ ‡¶¨‡¶æ‡¶õ‡¶ø‡¶§ ‡¶Ü‡¶ú‡¶æ‡¶¶",party:"‡¶ñ‡ßá‡¶≤‡¶æ‡¶´‡¶§ ‡¶Æ‡¶ú‡¶≤‡¶ø‡¶∏",symbol:"‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶≤ ‡¶ò‡ßú‡¶ø",votes:10340},
      {image:"image/muktadir chowduri.png", name:"‡¶Ü‡¶¨‡ßç‡¶¶‡ßÅ‡¶≤ ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§‡¶æ‡¶¶‡¶ø‡¶∞ ‡¶ö‡ßå‡¶ß‡ßÅ‡¶∞‡ßÄ",party:"‡¶ú‡¶æ‡¶§‡ßÄ‡ßü ‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶ø",symbol:"‡¶≤‡¶æ‡¶ô‡¶≤",votes:16420},
      {image:"image/lukman ahmed talukder.png", name:"‡¶≤‡ßÅ‡¶ï‡¶Æ‡¶æ‡¶® ‡¶Ü‡¶π‡¶Æ‡¶¶ ‡¶§‡¶æ‡¶≤‡ßÅ‡¶ï‡¶¶‡¶æ‡¶∞",party:"‡¶¨‡¶æ‡¶∏‡¶¶",symbol:"‡¶Æ‡¶á",votes:5240},
      {image:"image/afsar ahmed.png", name:"‡¶Ü‡¶´‡¶õ‡¶æ‡¶∞ ‡¶Ü‡¶π‡¶Æ‡¶¶",party:"‡¶∏‡ßç‡¶¨‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞",symbol:"‡¶´‡ßÅ‡¶ü‡¶¨‡¶≤",votes:7320},
      {image:"image/doctor jibon.png", name:"‡¶Ü‡¶¨‡ßÅ ‡¶Æ‡¶®‡¶∏‡ßÅ‡¶∞ ‡¶∏‡¶æ‡¶ñ‡¶æ‡¶ì‡ßü‡¶æ‡¶§ ‡¶π‡¶æ‡¶∏‡¶æ‡¶®",party:"‡¶¨‡¶ø‡¶è‡¶®‡¶™‡¶ø",symbol:"‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶∂‡ßÄ‡¶∑",votes:18210},
    ]
  },
  {
    seat:"‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú-‡ß©",
    candidates:[
      {image:"image/SM Saruare.png", name:"‡¶Æ‡ßã‡¶É ‡¶∂‡¶æ‡¶π‡¶ø‡¶®‡ßÅ‡¶∞ ‡¶∞‡¶π‡¶Æ‡¶æ‡¶®",party:"‡¶∏‡¶æ‡¶Ç‡¶∏‡ßç‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶ú‡ßã‡¶ü",symbol:"‡¶õ‡ßú‡¶ø",votes:4860},
      {image:"image/kaji mohosin ahomed.png", name:"‡¶ï‡¶æ‡¶ú‡ßÄ ‡¶Æ‡¶π‡¶∏‡¶ø‡¶® ‡¶Ü‡¶π‡¶Æ‡¶¶",party:"‡¶ú‡¶æ‡¶Æ‡¶æ‡ßü‡¶æ‡¶§‡ßá ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ",symbol:"‡¶¶‡¶æ‡¶Å‡ßú‡¶ø‡¶™‡¶æ‡¶≤‡ßç‡¶≤‡¶æ",votes:17340},
      {image:"image/SM Saruare.png", name:"‡¶è‡¶∏. ‡¶è‡¶Æ. ‡¶∏‡¶∞‡¶ì‡ßü‡¶æ‡¶∞",party:"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü",symbol:"‡¶Æ‡ßã‡¶Æ‡¶¨‡¶æ‡¶§‡¶ø",votes:8420},
      {image:"image/Mohib uddin ahomed suhel.png", name:"‡¶Æ‡¶π‡¶ø‡¶¨ ‡¶â‡¶¶‡ßç‡¶¶‡¶ø‡¶® ‡¶Ü‡¶π‡¶Æ‡ßá‡¶¶ ‡¶∏‡ßã‡¶π‡ßá‡¶≤",party:"‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶Ü‡¶®‡ßç‡¶¶‡ßã‡¶≤‡¶® ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂",symbol:"‡¶π‡¶æ‡¶§‡¶™‡¶æ‡¶ñ‡¶æ",votes:11280},
      {image:"image/abdul momin chowduri.png", name:"‡¶Ü‡¶¨‡ßç‡¶¶‡ßÅ‡¶≤ ‡¶Æ‡ßÅ‡¶Æ‡¶ø‡¶® ‡¶ö‡ßå‡¶ß‡ßÅ‡¶∞‡ßÄ",party:"‡¶ú‡¶æ‡¶§‡ßÄ‡ßü ‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶ø",symbol:"‡¶≤‡¶æ‡¶ô‡¶≤",votes:6540},
      {image:"image/gk gows.png", name:"‡¶Ü‡¶≤‡¶π‡¶æ‡¶ú‡ßç‡¶¨ ‡¶Æ‡ßã‡¶É ‡¶ú‡¶ø ‡¶ï‡ßá ‡¶ó‡¶â‡¶õ",party:"‡¶¨‡¶ø‡¶è‡¶®‡¶™‡¶ø",symbol:"‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶∂‡ßÄ‡¶∑",votes:20110},
    ]
  },
  {
    seat:"‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú-‡ß™",
    candidates:[
      {image:"image/Rasedul islam kukhon.png", name:"‡¶Æ‡ßã‡¶É ‡¶∞‡¶æ‡¶∂‡ßá‡¶¶‡ßÅ‡¶≤ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ ‡¶ñ‡ßã‡¶ï‡¶®",party:"‡¶∏‡¶æ‡¶Ç‡¶∏‡ßç‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶ú‡ßã‡¶ü",symbol:"‡¶õ‡ßú‡¶ø",votes:5120},
      {image:"image/Taheri.png", name:"‡¶Æ‡ßã‡¶É ‡¶ó‡¶ø‡ßü‡¶æ‡¶∏ ‡¶â‡¶¶‡ßç‡¶¶‡¶ø‡¶®",party:"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü",symbol:"‡¶Æ‡ßã‡¶Æ‡¶¨‡¶æ‡¶§‡¶ø",votes:8360},
      {image:"image/Mujibur Rahaman.png", name:"‡¶Æ‡ßã‡¶É ‡¶Æ‡ßÅ‡¶ú‡¶ø‡¶¨‡ßÅ‡¶∞ ‡¶∞‡¶π‡¶Æ‡¶æ‡¶®",party:"‡¶¨‡¶æ‡¶∏‡¶¶",symbol:"‡¶Æ‡¶á",votes:4380},
      {image:"image/Mijanur Rahaman Chowdury.png", name:"‡¶Æ‡ßã‡¶É ‡¶Æ‡¶ø‡¶ú‡¶æ‡¶®‡ßÅ‡¶∞ ‡¶∞‡¶π‡¶Æ‡¶æ‡¶® ‡¶ö‡ßå‡¶ß‡ßÅ‡¶∞‡ßÄ",party:"‡¶∏‡ßç‡¶¨‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞",symbol:"‡¶ò‡ßã‡ßú‡¶æ",votes:9870},
      {image:"image/sm foysol.png", name:"‡¶è‡¶∏. ‡¶è‡¶Æ. ‡¶´‡ßü‡¶∏‡¶≤",party:"‡¶¨‡¶ø‡¶è‡¶®‡¶™‡¶ø",symbol:"‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶∂‡ßÄ‡¶∑",votes:21450},
      {image:"image/saleha ahomod sajon.png", name:"‡¶∏‡¶æ‡¶≤‡ßá‡¶π ‡¶Ü‡¶π‡¶Æ‡¶¶ ‡¶∏‡¶æ‡¶ú‡¶®",party:"‡¶∏‡ßç‡¶¨‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞",symbol:"‡¶´‡ßÅ‡¶ü‡¶¨‡¶≤",votes:7640},
      {image:"image/sha muhamod alamin.png", name:"‡¶∂‡¶æ‡¶π ‡¶Æ‡ßã‡¶É ‡¶Ü‡¶≤ ‡¶Ü‡¶Æ‡¶ø‡¶®",party:"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶≤‡ßÄ‡¶ó",symbol:"‡¶π‡¶æ‡¶∞‡¶ø‡¶ï‡ßá‡¶®",votes:3290},
      {image:"image/rejaul mustofa.png", name:"‡¶Æ‡ßÅ‡¶É ‡¶∞‡ßá‡¶ú‡¶æ‡¶â‡¶≤ ‡¶Æ‡ßã‡¶∏‡ßç‡¶§‡¶´‡¶æ",party:"‡¶á‡¶®‡¶∏‡¶æ‡¶®‡¶ø‡ßü‡¶æ‡¶§ ‡¶¨‡¶ø‡¶™‡ßç‡¶≤‡¶¨ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂",symbol:"‡¶Ü‡¶™‡ßá‡¶≤",votes:22180},
    ]
  }
];


// ------------------ Load Saved Vote ------------------
const saved = localStorage.getItem("liveVotes");
if(saved){
  data = JSON.parse(saved);
}


// ------------------ Render Function ------------------
// ------------------ Global State ------------------
let showTop2 = false;


// ------------------ Render Function ------------------
function render(){
  const container = document.getElementById("seats");
  container.innerHTML = "";

  data.forEach((seat)=>{
    // vote ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ sort
    seat.candidates.sort((a,b)=> b.votes - a.votes);
    const max = seat.candidates[0].votes;

    let html = `
      <div class="seat">
        <div class="seat-title">${seat.seat} ‡¶Ü‡¶∏‡¶®</div>
    `;

    seat.candidates.forEach((c,i)=>{

      // üëâ ‡¶Ø‡¶¶‡¶ø Top2 mode ON ‡¶•‡¶æ‡¶ï‡ßá ‚Üí ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ 2 ‡¶ú‡¶®
      if(showTop2 && i > 1) return;

      html += `
        <div class="candidate ${i===0 ? 'leader' : ''}">
          
          <div class="photo">
            <img src="${c.image || 'image/default.png'}" alt="${c.name}">
          </div>

          <div class="info">
            <div class="name">${c.name}</div>
            <div class="party">${c.party}</div>
            <div class="symbol">‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï: ${c.symbol}</div>

            <div class="bar">
              <div class="fill" style="width:${(c.votes/max)*100}%"></div>
            </div>
          </div>

          <div class="votes">${c.votes.toLocaleString()}</div>
        </div>
      `;
    });

    html += `</div>`;
    container.innerHTML += html;
  });
}


// ------------------ First Load ------------------
render();


// ------------------ Single Global Button ------------------
const btn = document.getElementById("top2Btn");

btn.addEventListener("click", function(){
  showTop2 = !showTop2;

  this.textContent = showTop2
    ? "Show All Candidates"
    : "Show Top 2";

  render();
});






// ------------------ Auto Live Update ------------------
window.addEventListener("storage", function(e){
  if(e.key === "liveVotes"){
    data = JSON.parse(e.newValue);
    render();
  }
});


